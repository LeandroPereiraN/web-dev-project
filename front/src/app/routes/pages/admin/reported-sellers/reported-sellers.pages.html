<section class="space-y-8">
  <header class="space-y-1">
    <h1 class="text-3xl font-semibold text-slate-100">Vendedores más reportados</h1>
    <p class="text-sm text-slate-400">
      Controlá qué vendedores acumulan reportes activos y priorizá tus esfuerzos de moderación.
    </p>
  </header>

  @if (errorMessage()) {
  <p
    class="rounded-xl border border-dashed border-red-500/40 bg-red-500/10 px-4 py-3 text-sm text-red-200"
  >
    {{ errorMessage() }}
  </p>
  } @if (loading()) {
  <div class="space-y-3 rounded-3xl border border-slate-800/60 bg-slate-950/40 p-6">
    @for (skeleton of [0, 1, 2, 3]; track $index) {
    <div class="flex items-center gap-6">
      <p-skeleton width="28%" height="1.1rem"></p-skeleton>
      <p-skeleton width="22%" height="1.1rem"></p-skeleton>
      <p-skeleton width="12%" height="1.1rem"></p-skeleton>
      <p-skeleton width="16%" height="1.1rem"></p-skeleton>
      <p-skeleton width="18%" height="1.1rem"></p-skeleton>
    </div>
    }
  </div>
  } @else if (sellers().length) {
  <div class="rounded-3xl border border-slate-800/60 bg-slate-950/40">
    <p-table [value]="sellers()" styleClass="!border-0" [tableStyle]="{ 'min-width': '100%' }">
      <ng-template pTemplate="header">
        <tr class="text-left text-sm uppercase tracking-wide text-slate-400">
          <th class="px-5 py-4">Vendedor</th>
          <th class="px-5 py-4">Contacto</th>
          <th class="px-5 py-4">Reportes</th>
          <th class="px-5 py-4">Último reporte</th>
          <th class="px-5 py-4">Motivos frecuentes</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-seller>
        <tr class="border-t border-slate-800/60 text-sm text-slate-300">
          <td class="px-5 py-4">
            <div class="flex flex-col">
              <span class="font-medium text-slate-100">{{ seller.sellerName }}</span>
              <span class="text-xs text-slate-500">ID #{{ seller.sellerId }}</span>
            </div>
          </td>
          <td class="px-5 py-4">
            <span class="text-sm text-slate-300">{{ seller.sellerEmail }}</span>
          </td>
          <td class="px-5 py-4">
            <p-tag
              [value]="seller.reportCount + ' activos'"
              severity="warn"
              styleClass="text-xs"
            ></p-tag>
          </td>
          <td class="px-5 py-4">
            {{ seller.lastReportDate | date : 'dd/MM/yyyy HH:mm' }}
          </td>
          <td class="px-5 py-4">
            <div class="flex flex-wrap gap-2">
              @for (reason of seller.reasons; track $index) {
              <p-tag
                [value]="resolveReasonLabel(reason)"
                [severity]="resolveReasonSeverity(reason)"
                styleClass="text-xs"
              ></p-tag>
              }
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>

    <div class="border-t border-slate-800/60 px-4 py-3">
      <p-paginator
        [rows]="pageSize()"
        [first]="(page() - 1) * pageSize()"
        [totalRecords]="total()"
        [rowsPerPageOptions]="[5, 10, 20]"
        (onPageChange)="onPageChange($event)"
        styleClass="rounded-full border border-slate-800/60 bg-slate-900/50"
      ></p-paginator>
    </div>
  </div>
  } @else {
  <div
    class="flex flex-col items-center gap-4 rounded-3xl border border-dashed border-slate-800/60 bg-slate-950/40 px-8 py-16 text-center text-slate-400"
  >
    <i class="pi pi-users text-3xl text-slate-500"></i>
    <p class="max-w-md text-sm">
      No encontramos vendedores con múltiples reportes activos. Mantené este espacio monitoreado
      para actuar rápidamente cuando sea necesario.
    </p>
  </div>
  }
</section>
