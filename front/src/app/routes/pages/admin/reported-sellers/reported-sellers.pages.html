<section class="space-y-10">
  <header class="space-y-6">
    <div class="space-y-1">
      <h1 class="text-3xl font-semibold text-slate-100">Vendedores más reportados</h1>
      <p class="text-sm text-slate-400">
        Controlá qué vendedores acumulan reportes activos y priorizá tus esfuerzos de moderación.
      </p>
    </div>

    <div class="grid gap-3 text-sm sm:grid-cols-2 lg:grid-cols-4">
      <article
        class="rounded-2xl border border-slate-800/60 bg-slate-950/60 p-4 shadow-inner shadow-slate-950/20"
      >
        <p class="text-xs uppercase tracking-wide text-slate-400">Total monitoreados</p>
        <p class="mt-2 text-2xl font-semibold text-slate-100">{{ total() }}</p>
        <p class="text-xs text-slate-500">Vendedores en toda la plataforma</p>
      </article>
      <article
        class="rounded-2xl border border-slate-800/60 bg-slate-950/60 p-4 shadow-inner shadow-slate-950/20"
      >
        <p class="text-xs uppercase tracking-wide text-slate-400">En esta página</p>
        <p class="mt-2 text-2xl font-semibold text-emerald-300">{{ sellers().length }}</p>
        <p class="text-xs text-slate-500">Resultados visualizados</p>
      </article>
      <article
        class="rounded-2xl border border-slate-800/60 bg-slate-950/60 p-4 shadow-inner shadow-slate-950/20"
      >
        <p class="text-xs uppercase tracking-wide text-slate-400">Reporte más alto</p>
        <p class="mt-2 text-2xl font-semibold text-amber-300">
          {{ sellers()[0]?.reportCount || 0 }}
        </p>
        <p class="text-xs text-slate-500">Casos activos prioritarios</p>
      </article>
      <article
        class="rounded-2xl border border-slate-800/60 bg-linear-to-br from-slate-950/60 to-slate-900/80 p-4 shadow-inner shadow-slate-950/20"
      >
        <p class="text-xs uppercase tracking-wide text-slate-400">Fecha más reciente</p>
        <p class="mt-2 text-xl font-semibold text-slate-100">
          {{
            sellers()[0]?.lastReportDate
              ? (sellers()[0]?.lastReportDate | date : 'dd/MM HH:mm')
              : '--'
          }}
        </p>
        <p class="text-xs text-slate-500">Actualización del listado</p>
      </article>
    </div>
  </header>

  @if (errorMessage()) {
  <p
    class="rounded-xl border border-dashed border-red-500/40 bg-red-500/10 px-4 py-3 text-sm text-red-200"
  >
    {{ errorMessage() }}
  </p>
  } @if (loading()) {
  <div class="rounded-3xl border border-slate-800/60 bg-slate-950/40 p-6">
    <div class="grid gap-4 sm:grid-cols-2 xl:grid-cols-3">
      @for (skeleton of [0, 1, 2, 3, 4, 5]; track $index) {
      <article class="space-y-3 rounded-2xl border border-slate-900/60 bg-slate-950/70 p-4">
        <p-skeleton width="60%" height="1.1rem"></p-skeleton>
        <p-skeleton width="40%" height="0.9rem"></p-skeleton>
        <p-skeleton width="100%" height="0.85rem"></p-skeleton>
        <div class="grid grid-cols-2 gap-3">
          <p-skeleton width="100%" height="0.85rem"></p-skeleton>
          <p-skeleton width="100%" height="0.85rem"></p-skeleton>
        </div>
        <p-skeleton width="100%" height="2rem" borderRadius="0.75rem"></p-skeleton>
      </article>
      }
    </div>
  </div>
  } @else if (sellers().length) {
  <div class="rounded-3xl border border-slate-800/60 bg-slate-950/40">
    <div class="grid gap-4 p-4 sm:grid-cols-2 xl:grid-cols-3">
      @for (seller of sellers(); track seller.sellerId) {
      <article
        class="space-y-4 rounded-2xl border border-slate-900/70 bg-slate-950/70 p-5 text-sm text-slate-300"
      >
        <header class="flex items-start justify-between gap-3">
          <div class="space-y-1">
            <p class="text-base font-semibold text-slate-100">{{ seller.sellerName }}</p>
            <p class="text-xs text-slate-500">ID #{{ seller.sellerId }}</p>
          </div>
          <p-tag [value]="seller.reportCount + ' activos'" severity="warn"></p-tag>
        </header>

        <div class="space-y-1 text-xs text-slate-400">
          <p class="uppercase tracking-wide">Contacto</p>
          <p class="rounded-2xl bg-slate-900/60 px-3 py-2 text-sm text-slate-200">
            {{ seller.sellerEmail }}
          </p>
        </div>

        <div class="space-y-1 text-xs text-slate-400">
          <p class="uppercase tracking-wide">Último reporte</p>
          <p class="text-sm text-slate-200">
            {{ seller.lastReportDate | date : 'dd/MM/yyyy HH:mm' }}
          </p>
        </div>

        <div class="space-y-2 text-xs text-slate-400">
          <p class="uppercase tracking-wide">Motivos frecuentes</p>
          <div class="flex flex-wrap gap-2">
            @for (reason of seller.reasons; track $index) {
            <p-tag
              [value]="resolveReasonLabel(reason)"
              [severity]="resolveReasonSeverity(reason)"
              styleClass="text-xs"
            ></p-tag>
            }
          </div>
        </div>
      </article>
      }
    </div>

    <div class="border-t border-slate-800/60 px-4 py-3">
      <p-paginator
        [rows]="pageSize()"
        [first]="(page() - 1) * pageSize()"
        [totalRecords]="total()"
        [rowsPerPageOptions]="[5, 10, 20]"
        (onPageChange)="onPageChange($event)"
        styleClass="flex flex-wrap gap-3 rounded-2xl border border-slate-800/60 bg-slate-900/50 px-3"
      ></p-paginator>
    </div>
  </div>
  } @else {
  <div
    class="flex flex-col items-center gap-4 rounded-3xl border border-dashed border-slate-800/60 bg-slate-950/40 px-8 py-16 text-center text-slate-400"
  >
    <i class="pi pi-users text-3xl text-slate-500"></i>
    <p class="max-w-md text-sm">
      No encontramos vendedores con múltiples reportes activos. Mantené este espacio monitoreado
      para actuar rápidamente cuando sea necesario.
    </p>
  </div>
  }
</section>
